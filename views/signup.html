<!DOCTYPE html>
<html lang="en">
<head>
    <title>注册</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <!-- <meta name="format-detection" content="telephone=no"> -->
    <link rel="stylesheet" href="https://res.wx.qq.com/open/libs/weui/1.1.2/weui.min.css">
        <!-- <link rel="stylesheet" href="https://res.wx.qq.com/open/libs/weui/0.4.2/weui.min.css"> -->
    <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
    <script src='/javascripts/jquery.min.js'></script>
</head>
<body>

<!-- <div class="weui-cells__title">用户注册</div>
<div class="weui-cells">
    <div class="weui-cell">
        <div class="weui-cell__hd"><img src="/images/account-1.ico" alt="" style="width:20px;margin-right:5px;display:block"></div>
        <div class="weui-cell__bd"><p>用户名</p></div>
        <div class="weui-cell__ft"><input type="text" name="username" class="weui-input" required="" placeholder="请输入用户名"></div>

    </div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><img src="/images/phone.ico" alt="" style="width:20px;margin-right:5px;display:block"></div>
        <div class="weui-cell__bd"><p>手机号</p></div>
        <div class="weui-cell__ft"><input type="text" name="username" class="weui-input" required="" placeholder="请输入手机号"></div>
    </div>
    <div class="weui-cell">	
        <div class="weui-cell__hd"><img src="/images/password-2.ico" alt="" style="width:20px;margin-right:5px;display:block"></div>
        <div class="weui-cell__bd"><p>密码</p></div>
        <div class="weui-cell__ft"><input type="text" name="username" class="weui-input" required="" placeholder="请输入密码"></div>
    </div>
    <div class="weui-cell"> 
        <div class="weui-cell__hd"><img src="/images/password-2.ico" alt="" style="width:20px;margin-right:5px;display:block"></div>
        <div class="weui-cell__bd"><p>确认密码</p></div>
        <div class="weui-cell__ft"><input type="text" name="username" class="weui-input" required="" placeholder="请再次输入密码"></div>
    </div>
</div>
<div class="weui-btn-area">
    <a href="javascript:;" class="weui-btn weui-btn_primary js-btn">注册</a>
</div> -->



<div class="weui-cells__title" style="color:green">用户注册</div>
<div class="weui-cells weui-cells_form">
    <div class="weui-cell">
        <div class="weui-cell__hd"><label class="weui-label">用户名</label></div>
        <div class="weui-cell__bd">
            <input id="account" value="stevekeol" class="weui-input" type="" placeholder="请输入用户名"/>
        </div>
    </div>

    <div class="weui-cell weui-cell_select weui-cell_select-after">
        <div class="weui-cell__hd">
            <label for="" class="weui-label">性别</label>
        </div>
        <div class="weui-cell__bd">
            <select id="gender" class="weui-select" name="select2">
                <option value="1">男</option>
                <option value="0">女</option>
            </select>
        </div>
    </div>

    <div class="weui-cell weui-cell_vcode">
        <div class="weui-cell__hd">
            <label class="weui-label">电话</label>
        </div>
        <div class="weui-cell__bd">
            <input id="phone" value="15258800906" class="weui-input" type="tel" placeholder="请输入手机号">
        </div>
        <div class="weui-cell__ft">
            <a href="http://www.baidu.com" class="weui-vcode-btn">获取验证码</a>
        </div>
    </div>

    <div class="weui-cell">
        <div class="weui-cell__hd"><label for="" class="weui-label">出生日期</label></div>
        <div class="weui-cell__bd">
            <input id="birthday" class="weui-input" type="date" value="" placeholder="请选择出生日期"/>
        </div>
    </div>

    <div class="weui-cell">
        <div class="weui-cell__hd"><label class="weui-label">密码</label></div>
        <div class="weui-cell__bd">
            <input id="password" value="123456" class="weui-input" type="password" pattern="[0-9]*" placeholder="请输入密码"/>
        </div>
    </div>
    <div class="weui-cell">
        <div class="weui-cell__hd"><label class="weui-label">确认密码</label></div>
        <div class="weui-cell__bd">
            <input id="repassword" value="123456" class="weui-input" type="password" pattern="[0-9]*" placeholder="请再次输入密码"/>
        </div>
    </div>

    <div class="weui-cell weui-cell_vcode">
        <div class="weui-cell__hd"><label class="weui-label">验证码</label></div>
        <div class="weui-cell__bd">
            <input id="vcode" class="weui-input" type="" value="pbmn" placeholder="请输入验证码"/>
        </div>
        <div class="weui-cell__ft">
            <img class="weui-vcode-img" src="/images/vcode_1.png" />
        </div>
    </div>
</div>

<label for="weuiAgree" class="weui-agree">
    <input id="weuiAgree" type="checkbox" class="weui-agree__checkbox">
    <span class="weui-agree__text">
        阅读并同意<a href="/terms">《相关条款》</a>
    </span>
</label>

<div class="weui-btn-area">
    <a href="" id="signupBtn" class="weui-btn weui-btn_primary js-btn">注册</a>
</div>

<!-- footer -->
<div class="weui-footer">
    <p class="weui-footer__links">
        <a href="http://www.ydytech.net" class="weui-footer__link">医电园科技</a>
    </p>
    <p class="weui-footer__text">Copyright &copy; 2016-2017 ydytech.net</p>
</div>

<script>
(function($){
        $(document).ready(function () {
            $('#signupBtn').on('click', (function (e) {
                e.preventDefault();

                var formData = {};
                    formData.account = $("#account").val();
                    formData.gender = $("#gender").val();
                    formData.phone =  $("#phone").val();
                    // formData.birthday =  $("#birthday").val();                    
                    formData.password = $("#password").val();
                    formData.repassword =  $("#repassword").val();
                    // formData.vcode =  $("#vcode").val();

                    if(formData.password === formData.repassword){
                        $.ajax({
                            type: 'POST',
                            url: '/signupPost',
                            data: formData,
                            success: function (data) {
                                if (data['code'] == '00'){
                                    alert("internet or database access error...");
                                    window.location.href = 'http://www.baidu.com';  
                                }else if(data['code'] == '01'){
                                    alert("account existed!"); 
                                    window.location.href = '/signup';
                                }else if(data['code'] == '02'){
                                    alert("Account created successfully!");   
                                    window.location.href ='/login';
                                }
                            },
                            error: function (data) {
                                alert("fuck the world ... error!");
                            }
                        });
                    }else{
                        alert('password not match!');
                    }
            }));
        });
})(jQuery);
</script>

</body>
</html>